{"version":3,"sources":["../src/cli.ts","../src/lib/colorizeUserVersion.ts","../src/lib/compareUserVersions.ts","../src/lib/getSupportedVersions.ts","../src/lib/getUserVersions.ts"],"sourcesContent":["import { bold, green } from 'chalk';\nimport CliTable from 'cli-table';\n\nimport { colorizeUserVersion } from './lib/colorizeUserVersion';\nimport { compareUserVersions } from './lib/compareUserVersions';\nimport { getSupportedVersions } from './lib/getSupportedVersions';\nimport { getUserVersions } from './lib/getUserVersions';\n\nexport function runVersions() {\n  const { error, info } = console;\n\n  const supportedVersions = getSupportedVersions();\n\n  const cliTable = new CliTable({\n    head: ['', bold('Supported'), bold(`Yours / System`)],\n  });\n\n  const fuelUpLink = green('https://github.com/fuellabs/fuelup');\n\n  const { userForcVersion, userFuelCoreVersion } = getUserVersions({ fuelUpLink });\n\n  const comparisons = compareUserVersions({\n    userForcVersion,\n    userFuelCoreVersion,\n  });\n\n  const userForcColorized = colorizeUserVersion({\n    version: userForcVersion,\n    isGt: comparisons.userForcIsGt,\n    isOk: comparisons.userForcIsEq,\n  });\n\n  const userFuelCoreColorized = colorizeUserVersion({\n    version: userFuelCoreVersion,\n    isGt: comparisons.userFuelCoreIsGt,\n    isOk: comparisons.userFuelCoreIsEq,\n  });\n\n  cliTable.push(['Forc', supportedVersions.FORC, userForcColorized]);\n  cliTable.push(['Fuel-Core', supportedVersions.FUEL_CORE, userFuelCoreColorized]);\n\n  const someIsGt = comparisons.userForcIsGt || comparisons.userFuelCoreIsGt;\n  const bothAreExact = comparisons.userForcIsEq && comparisons.userFuelCoreIsEq;\n\n  if (someIsGt) {\n    info(`Your system's components are newer than the ones supported!`);\n    info(cliTable.toString());\n    process.exit(0);\n  } else if (bothAreExact) {\n    info(`You have all the right versions! ⚡`);\n    info(cliTable.toString());\n    process.exit(0);\n  } else {\n    error(`You're using outdated versions — update them with:`);\n    error(`  ${fuelUpLink}`);\n    error(cliTable.toString());\n    process.exit(1);\n  }\n}\n","import { cyan, green, red } from 'chalk';\n\nexport interface IColorizeUserVersion {\n  version: string;\n  isGt: boolean;\n  isOk: boolean;\n}\n\nexport const colorizeUserVersion = (params: IColorizeUserVersion) => {\n  const { version, isGt, isOk } = params;\n\n  if (isGt) {\n    return cyan(version);\n  }\n\n  if (isOk) {\n    return green(version);\n  }\n\n  return red(version);\n};\n","import semver from 'semver';\n\nimport { getSupportedVersions } from './getSupportedVersions';\n\nexport interface ICompareVersionsParams {\n  userForcVersion: string;\n  userFuelCoreVersion: string;\n}\n\nexport function compareUserVersions(params: ICompareVersionsParams) {\n  const { userForcVersion, userFuelCoreVersion } = params;\n\n  const versions = getSupportedVersions();\n\n  // are user's versions GREATER than the ones supported by the SDK?\n  const userForcIsGt = semver.gt(userForcVersion, versions.FORC);\n  const userFuelCoreIsGt = semver.gt(userFuelCoreVersion, versions.FUEL_CORE);\n\n  // are user's versions EXACTLY the ones supported by the SDK?\n  const userForcIsEq = semver.eq(userForcVersion, versions.FORC);\n  const userFuelCoreIsEq = semver.eq(userFuelCoreVersion, versions.FUEL_CORE);\n\n  return {\n    userForcIsGt,\n    userFuelCoreIsGt,\n    userForcIsEq,\n    userFuelCoreIsEq,\n  };\n}\n","export function getSupportedVersions() {\n  return {\n    FORC: '0.44.0',\n    FUEL_CORE: '0.20.5',\n    FUELS: '0.60.0',\n  };\n}\n","import { execSync } from 'child_process';\n\nexport function getUserVersions(params: { fuelUpLink: string }) {\n  const { error } = console;\n\n  let userForcVersion: string | undefined;\n  let userFuelCoreVersion: string | undefined;\n\n  try {\n    const reg = /[^0-9.]+/g;\n    userForcVersion = execSync('forc --version').toString().replace(reg, '');\n    userFuelCoreVersion = execSync('fuel-core --version').toString().replace(reg, '');\n  } catch (err) {\n    error('Make sure you have Forc and Fuel-Core installed.');\n    error(`  ${params.fuelUpLink}`);\n    throw err;\n  }\n\n  return {\n    userForcVersion,\n    userFuelCoreVersion,\n  };\n}\n"],"mappings":"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","names":["green","green"]}